{% extends 'base.html' %}
{% load staticfiles %}

{% block head %}
    <script type="text/javascript" src="{% static 'lib/suncalc/suncalc.js' %}" ></script>
    <script type="text/javascript" src="{% static 'data.js' %}" ></script>
{% endblock %}

{% block content %}

<div class="row" ng-app="data" ng-controller="DataController">

    <div class="col-md-12">
        <h2>Daten für {$ service.location.name $}</h2>
    </div>

    <div class="col-md-9">

        <div class="canvas box" ng-hide="service.dialpad">
            <div class="label-empty" ng-show="service.count == 0">
                Keine Daten vorhanden
            </div>
            <svg id="plot" viewBox="0 0 640 480" preserveAspectRatio="xMidYMid" />
        </div>

    </div>

    <div class="col-md-3">

        <dl>
            <dt>Ort</dt>
            <dd>{$ service.location.name $}</dd>

            <div ng-show="service.location.device">
                <dt>Device</dt>
                <dd>{$ service.location.device $}</dd>
            </div>

            <dt>Position</dt>
            <dd>{$ service.location.longitude $} N / {$ service.location.latitude $} E</dd>

        </dl>

        <form name="SiteForm" class="site-form">
            <div class="form-group">

                <label for="site">Anderen Ort auswählen</label>
                <select id="site" class="form-control"
                    ng-model="service.location.slug"
                    ng-options="location.slug as location.name for location in service.locations">
                </select>

            </div>

            <div class="form-group">

                <label for="site">Andere Meßgröße auswählen</label>
                <select id="site" class="form-control"
                    ng-model="service.quantity"
                    ng-change="service.drawPlot()"
                    ng-options="quantity.key as quantity.text for quantity in service.quantities">
                </select>

            </div>

            <div class="form-group">
                <label for="date">Anderes Datum auswählen</label>
                <input type="date" id="date" class="form-control"
                    ng-model="service.date"
                    ng-change="service.fetchMeasurements()"></input>
            </div>

            <div class="form-group">
                <button class="btn btn-default" ng-click="service.prev()">
                    <span class="glyphicon glyphicon-backward"></span>
                </button>
                <button class="btn btn-default" ng-click="service.next()">
                    <span class="glyphicon glyphicon-forward"></span>
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
